from flask import request, jsonify, jsonfrom nav import navfrom dbs.db import DB@nav.route("/save",methods=['GET', 'POST'])def save():    param = request.json.get("param")    treeData = json.dumps(param["treeData"])    fileData = param["fileData"]    db = DB()    #sql1 = """insert into nav_tree (user_name,user_id,tree_data) values (?,?,?)"""    user_id = param["user_id"]    sql1 = """update nav_tree set tree_data = ? where user_id = ?"""    result1 = db.doUpdate(sql1,(treeData,user_id))    sql2 = """insert into files(id,user_id,file_name,is_leaf,file_path) values (?,?,?,?,?)"""    is_leaf = 1 if fileData["isLeaf"] else 0    result2 = db.doInsert(sql2,[(fileData["key"],user_id,fileData["title"],is_leaf,fileData["path"])])    db.doClose()    if result1 and result2:        data = {"code": 1, "data": {}, "msg": "成功"}        return jsonify(data)    else:        db.conn.rollback()        data = {"code": 0,"data":{},"msg":"新增失败"}        return jsonify(data)@nav.route("/isexist",methods=["POST"])def check_same_file():    param = request.json.get("param")    comonPath = param["comonPath"]    user_id = param["user_id"]    db = DB()    sql = """select * from files where file_path = ? and user_id = ? """    result = db.doSelect(sql,(comonPath,user_id))    print(result)    if result:        data = {"code": 1,"data":{"isExsit": True},"msg":"存在相同文件名"}        return jsonify(data)    else:        data = {"code": 0,"data":{"isExist":False},"msg":"不存在相同文件名"}        return jsonify(data)